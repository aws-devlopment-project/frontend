<div class="login-catchphrase">
    <h2>ë¡œê·¸ì¸</h2>
    <p>ì¢‹ì€ ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ìŠµê´€ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>
</div>

<div class="loginView">
    <div class="loginOrSign">
        <div class="selectLogin" 
             (click)="toggle(true)" 
             [class.loginCollapsed]="clickLogin()"
             tabindex="0"
             role="tab"
             [attr.aria-selected]="clickLogin()">
            ë¡œê·¸ì¸
        </div>
        <div class="selectSign" 
             (click)="toggle(false)" 
             [class.signCollapsed]="!clickLogin()"
             tabindex="0"
             role="tab"
             [attr.aria-selected]="!clickLogin()">
            íšŒì›ê°€ì…
        </div>
    </div>

    <!-- ë¡œê·¸ì¸ í¼ -->
    @if (clickLogin() == true) {
        <form id="aws-login-form" 
              class="login-form" 
              [formGroup]="loginForm" 
              (ngSubmit)="onSubmit($event)"
              novalidate>
            <div class="form-row">
                <div class="form-col">
                    <label class="form-label" for="login-email">ì´ë©”ì¼ ì£¼ì†Œ</label>
                    <input class="form-control" 
                           id="login-email"
                           type="email" 
                           formControlName="email"
                           placeholder="name@company.com"
                           autocomplete="email">
                    @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
                        <small class="text-danger">
                            ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                        </small>
                    }
                </div>
                <div class="form-col">
                    <label class="form-label" for="login-password">ë¹„ë°€ë²ˆí˜¸</label>
                    <input class="form-control" 
                           id="login-password"
                           type="password" 
                           formControlName="password"
                           placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                           autocomplete="current-password">
                    @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                        <small class="text-danger">
                            ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                        </small>
                    }
                </div>
            </div>
        </form>
        
        <div class="failureLogin" [class.collapsed]="successLogin()">
            <p class="alert-account">{{ errMsg }}</p>
            <p class="find-password" (click)="passwordReset()" tabindex="0">
                ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠì–´ë²„ë¦¬ì…¨ë‚˜ìš”?
            </p>
        </div>
        
        <button class="btn btn-aws" 
                type="submit" 
                form="aws-login-form" 
                [disabled]="loginForm.invalid"
                aria-label="AWSë¡œ ë¡œê·¸ì¸">
            ë¡œê·¸ì¸
        </button>
        
        <div class="btn btn-google" 
            (click)="onGoogleLogin()"
            [class.disabled]="isLoading()"
            tabindex="0" 
            role="button"
            aria-label="Googleë¡œ ë¡œê·¸ì¸">
            {{ isLoading() ? 'ë¡œê·¸ì¸ ì¤‘...' : 'Googleë¡œ ë¡œê·¸ì¸' }}
        </div>
    }

    <!-- íšŒì›ê°€ì… í¼ -->
    @else if (signUpNextStep() == false) {
        <form id="aws-sign-up-form" 
              class="login-form" 
              [formGroup]="loginForm" 
              (ngSubmit)="onSubmit($event)"
              novalidate>
            <div class="form-row">
                <div class="form-col">
                    <label class="form-label" for="signup-email">ì´ë©”ì¼ ì£¼ì†Œ</label>
                    <input class="form-control" 
                           id="signup-email"
                           type="email" 
                           formControlName="email"
                           placeholder="name@company.com"
                           autocomplete="email">
                    @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
                        <small class="text-danger">
                            ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                        </small>
                    }
                </div>
                
                <div class="form-col">
                    <label class="form-label" for="signup-password">ë¹„ë°€ë²ˆí˜¸</label>
                    <div class="password-input-container">
                        <div class="password-input-wrapper">
                            <input class="form-control" 
                                   id="signup-password"
                                   [type]="showPassword() ? 'text' : 'password'"
                                   formControlName="password"
                                   placeholder="8ì ì´ìƒì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                   autocomplete="new-password">
                            <button type="button" 
                                    class="password-toggle"
                                    (click)="togglePasswordVisibility()"
                                    [attr.aria-label]="showPassword() ? 'ë¹„ë°€ë²ˆí˜¸ ìˆ¨ê¸°ê¸°' : 'ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°'">
                                {{ showPassword() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
                            </button>
                        </div>
                        
                        <!-- ë¹„ë°€ë²ˆí˜¸ ê°•ë„ í‘œì‹œê¸° -->
                        @if (showPasswordRequirements()) {
                            <div class="password-strength-container">
                                <div class="password-strength-bar">
                                    <div class="strength-indicator" 
                                         [class]="'strength-' + passwordStrength()"
                                         [style.width.%]="passwordCompletionPercentage">
                                    </div>
                                </div>
                                <span class="strength-text">
                                    {{ passwordStrength() === 'weak' ? 'ì•½í•¨' : 
                                       passwordStrength() === 'medium' ? 'ë³´í†µ' : 'ê°•í•¨' }}
                                    ({{ passwordCompletionPercentage }}%)
                                </span>
                            </div>
                            
                            <!-- ë¹„ë°€ë²ˆí˜¸ ìš”êµ¬ì‚¬í•­ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                            <div class="password-requirements">
                                <div class="requirement-item" 
                                     [class.completed]="passwordRequirements().minLength">
                                    <span class="requirement-icon">
                                        {{ passwordRequirements().minLength ? 'âœ“' : 'â—‹' }}
                                    </span>
                                    ìµœì†Œ 8ì ì´ìƒ
                                </div>
                                <div class="requirement-item" 
                                     [class.completed]="passwordRequirements().hasLowercase">
                                    <span class="requirement-icon">
                                        {{ passwordRequirements().hasLowercase ? 'âœ“' : 'â—‹' }}
                                    </span>
                                    ì†Œë¬¸ì í¬í•¨
                                </div>
                                <div class="requirement-item" 
                                     [class.completed]="passwordRequirements().hasUppercase">
                                    <span class="requirement-icon">
                                        {{ passwordRequirements().hasUppercase ? 'âœ“' : 'â—‹' }}
                                    </span>
                                    ëŒ€ë¬¸ì í¬í•¨
                                </div>
                                <div class="requirement-item" 
                                     [class.completed]="passwordRequirements().hasNumber">
                                    <span class="requirement-icon">
                                        {{ passwordRequirements().hasNumber ? 'âœ“' : 'â—‹' }}
                                    </span>
                                    ìˆ«ì í¬í•¨
                                </div>
                                <div class="requirement-item" 
                                     [class.completed]="passwordRequirements().hasSpecialChar">
                                    <span class="requirement-icon">
                                        {{ passwordRequirements().hasSpecialChar ? 'âœ“' : 'â—‹' }}
                                    </span>
                                    íŠ¹ìˆ˜ë¬¸ì í¬í•¨
                                </div>
                            </div>
                        }
                    </div>
                    
                    @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                        <small class="text-danger">
                            {{ passwordStrength() === 'weak' ? 
                               'ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤. ìš”êµ¬ì‚¬í•­ì„ í™•ì¸í•´ì£¼ì„¸ìš”' : 
                               'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”' }}
                        </small>
                    }
                </div>
                
                <div class="form-col">
                    <label class="form-label" for="signup-username">ë³„ì¹­</label>
                    <input class="form-control"
                           id="signup-username"
                           type="text"
                           formControlName="username"
                           placeholder="ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•  ë³„ì¹­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
                           autocomplete="username">
                    @if (loginForm.get('username')?.invalid && loginForm.get('username')?.touched) {
                        <small class="text-danger">
                            ë³„ì¹­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”
                        </small>
                    }
                </div>
            </div>
        </form>
        
        <button class="btn btn-sign-up-aws" 
                type="submit" 
                form="aws-sign-up-form" 
                [disabled]="loginForm.invalid || passwordStrength() === 'weak'"
                aria-label="AWSë¡œ íšŒì›ê°€ì…">
            ê³„ì • ë§Œë“¤ê¸°
        </button>
    }

    <!-- ì¸ì¦ ì½”ë“œ í™•ì¸ í¼ -->
    @else {
        <form id="verification-form" 
              class="login-form" 
              [formGroup]="emailForm" 
              (ngSubmit)="onSubmit($event)"
              novalidate>
            <div class="form-row">
                <div class="form-col">
                    <label class="form-label" for="verification-code">ì¸ì¦ ì½”ë“œ</label>
                    <input class="form-control" 
                           id="verification-code"
                           type="text" 
                           formControlName="verificationCode"
                           placeholder="6ìë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                           maxlength="6"
                           autocomplete="one-time-code">
                    @if (emailForm.get('verificationCode')?.invalid && emailForm.get('verificationCode')?.touched) {
                        <small class="text-danger">
                            6ìë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                        </small>
                    }
                </div>
            </div>
        </form>
        
        <button class="btn btn-sign-up-aws" 
                type="submit" 
                form="verification-form" 
                [disabled]="emailForm.invalid"
                aria-label="ì¸ì¦ ì½”ë“œ í™•ì¸">
            ì¸ì¦ ì½”ë“œ í™•ì¸
        </button>
    }
</div>