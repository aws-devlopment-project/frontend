// Service íŒ¨í„´ ì‚¬ìš©ë²• ë° ê°€ì´ë“œ

/*
=== ğŸ“‹ ì ìš©ëœ Service íŒ¨í„´ êµ¬ì¡° ===

1. SharedStateService (Core/Service/SharedState.service.ts)
   - ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ì¤‘ì•™ ê´€ë¦¬
   - Signal ê¸°ë°˜ ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬
   - Computed propertiesë¡œ íŒŒìƒ ìƒíƒœ ìë™ ê³„ì‚°
   - ì½ê¸° ì „ìš© signalsë¡œ ìº¡ìŠí™”

2. ì»´í¬ë„ŒíŠ¸ë³„ ì—­í•  ë¶„ë‹´:
   - Main: ì „ì²´ ë ˆì´ì•„ì›ƒ ë° ë¼ìš°íŒ… ê´€ë¦¬
   - SideBar: ë„¤ë¹„ê²Œì´ì…˜ ë° ê·¸ë£¹/ì±„ë„ ì„ íƒ
   - HeaderBar: ìƒë‹¨ ë°” ë° í˜„ì¬ í˜ì´ì§€ ì •ë³´ í‘œì‹œ
   - MainContainer: ì±„íŒ… ì¸í„°í˜ì´ìŠ¤

=== ğŸ”„ ìƒíƒœ íë¦„ ===

1. ì‚¬ìš©ì ì•¡ì…˜ (í´ë¦­, ì…ë ¥ ë“±)
   â†“
2. ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
   â†“
3. SharedStateService ë©”ì„œë“œ í˜¸ì¶œ
   â†“
4. Signal ì—…ë°ì´íŠ¸
   â†“
5. Computed signals ìë™ ì¬ê³„ì‚°
   â†“
6. ëª¨ë“  êµ¬ë… ì»´í¬ë„ŒíŠ¸ ìë™ ì—…ë°ì´íŠ¸

=== ğŸ’¡ ì£¼ìš” ì¥ì  ===

âœ… ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì› (Single Source of Truth)
âœ… íƒ€ì… ì•ˆì •ì„±
âœ… ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë°
âœ… ìº¡ìŠí™”ëœ ìƒíƒœ ê´€ë¦¬
âœ… ë””ë²„ê¹… ìš©ì´ì„±
âœ… í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±

=== ğŸ“– ì‚¬ìš© ì˜ˆì‹œ ===
*/

// 1. ì»´í¬ë„ŒíŠ¸ì—ì„œ Service ì£¼ì…
@Component({})
export class ExampleComponent {
  constructor(public sharedState: SharedStateService) {}
  
  // ìƒíƒœ ì½ê¸°
  getCurrentTab() {
    return this.sharedState.activeTab();
  }
  
  // ìƒíƒœ ë³€ê²½
  changeTab(newTab: string) {
    this.sharedState.setActiveTab(newTab);
  }
  
  // Computed ì‚¬ìš©
  isChannelView = computed(() => 
    this.sharedState.isChannelSelected()
  );
}

// 2. í…œí”Œë¦¿ì—ì„œ Service ì‚¬ìš©
/*
<div class="component">
  @if (sharedState.isChannelSelected()) {
    <app-chat></app-chat>
  }
  
  <button (click)="sharedState.setActiveTab('home')">
    í™ˆìœ¼ë¡œ ê°€ê¸°
  </button>
  
  <p>í˜„ì¬ í˜ì´ì§€: {{ sharedState.currentPageTitle() }}</p>
</div>
*/

// 3. Effectë¡œ ìƒíƒœ ë³€í™” ê°ì§€
/*
export class ReactiveComponent {
  constructor(private sharedState: SharedStateService) {
    effect(() => {
      const selectedGroup = this.sharedState.selectedGroup();
      if (selectedGroup) {
        console.log('ê·¸ë£¹ ë³€ê²½ë¨:', selectedGroup);
        this.onGroupChanged(selectedGroup);
      }
    });
  }
  
  private onGroupChanged(groupId: string) {
    // ê·¸ë£¹ ë³€ê²½ì— ë”°ë¥¸ ë¡œì§
  }
}
*/

/*
=== âš ï¸ ì£¼ì˜ì‚¬í•­ ===

1. ServiceëŠ” providedIn: 'root'ë¡œ ì„¤ì •ë˜ì–´ ì‹±ê¸€í†¤
   - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ ê³µìœ 

2. ì§ì ‘ Signal ìˆ˜ì • ê¸ˆì§€
   - private _signal ì‚¬ìš©, readonlyë¡œ ë…¸ì¶œ
   - ì „ìš© ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ìƒíƒœ ë³€ê²½

3. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
   - effect() ì‚¬ìš© ì‹œ ì ì ˆí•œ ì •ë¦¬ í•„ìš”
   - OnDestroyì—ì„œ êµ¬ë… í•´ì œ (í•„ìš”ì‹œ)

4. íƒ€ì… ì•ˆì •ì„± ìœ ì§€
   - interface ì •ì˜í•˜ì—¬ íƒ€ì… ì•ˆì •ì„± í™•ë³´
   - ì»´íŒŒì¼ íƒ€ì„ ì—ëŸ¬ ë°©ì§€

=== ğŸ› ï¸ í™•ì¥ ë°©ë²• ===

1. ìƒˆë¡œìš´ ìƒíƒœ ì¶”ê°€:
   - private _newState = signal(ì´ˆê¸°ê°’);
   - readonly newState = this._newState.asReadonly();
   - setNewState(value) ë©”ì„œë“œ ì¶”ê°€

2. ìƒˆë¡œìš´ Computed ì¶”ê°€:
   - readonly derivedState = computed(() => 
       ê³„ì‚° ë¡œì§
     );

3. ìƒˆë¡œìš´ ì•¡ì…˜ ì¶”ê°€:
   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨í•œ ë©”ì„œë“œ êµ¬í˜„
   - ì—¬ëŸ¬ state ë™ì‹œ ì—…ë°ì´íŠ¸ ê°€ëŠ¥

=== ğŸ” ë””ë²„ê¹… íŒ ===

1. ì½˜ì†” ë¡œê·¸ í™œìš©:
   - Service ë©”ì„œë“œì— ë¡œê·¸ ì¶”ê°€ë¨
   - ìƒíƒœ ë³€í™” ì¶”ì  ê°€ëŠ¥

2. Angular DevTools:
   - Signal ìƒíƒœ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
   - ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì—ì„œ Service í™•ì¸

3. ìƒíƒœ ë¤í”„:
*/

// Serviceì— ë””ë²„ê¹… ë©”ì„œë“œ ì¶”ê°€ ê°€ëŠ¥
export class SharedStateService {
  // ... ê¸°ì¡´ ì½”ë“œ ...
  
  // ë””ë²„ê¹…ìš© ë©”ì„œë“œ
  dumpState() {
    return {
      activeTab: this.activeTab(),
      selectedGroup: this.selectedGroup(),
      selectedChannel: this.selectedChannel(),
      currentUser: this.currentUser(),
      messagesCount: this.messages().length,
      sidebarExpanded: this.sidebarExpanded(),
      expandedSections: this.expandedSections()
    };
  }
  
  // ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥
  // (window as any).debugState = () => this.dumpState();
}

/*
=== ğŸš€ ì„±ëŠ¥ ìµœì í™” ===

1. Signalì˜ ë³€ê²½ ê°ì§€ëŠ” ë§¤ìš° íš¨ìœ¨ì 
2. ComputedëŠ” ì˜ì¡´ì„±ì´ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°
3. OnPush ì „ëµê³¼ ì™„ë²½ í˜¸í™˜
4. ë¶ˆí•„ìš”í•œ ë Œë”ë§ ìµœì†Œí™”

=== ğŸ“š ì¶”ê°€ í•™ìŠµ ìë£Œ ===

- Angular Signals ê³µì‹ ë¬¸ì„œ
- Reactive Programming íŒ¨í„´
- State Management Best Practices
- Angular Architecture Guidelines
*/